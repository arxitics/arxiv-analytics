/*! UI Schema v0.4.0 | (c) 2016 Arxitics | MIT license */
if("undefined"==typeof jQuery)throw new Error("jQuery has not been loaded yet for context");var schema=jQuery.isPlainObject(schema)?schema:{};!function(e){"use strict";schema=e.extend(!0,{setup:{classPrefix:"ui",dataPrefix:"schema",autoLoad:!0,autoBind:".schema",autoTrigger:".schema"},events:{retrieve:{type:"retrieve",namespace:".options.data-api.schema",selector:"[data-schema-options]"},validate:{type:"validate",namespace:".form-validate.form.data-api.schema",selector:"form[data-schema-validate]"},sprite:{type:"create",namespace:".icons.svg.data-api.schema",selector:"i[data-schema-icon]"},trim:{type:"remove",namespace:".white-space.text-node.schema",selector:".ui-space-trim"},extract:{type:"create",namespace:".dom.data-api.schema",selector:"body [data-schema-extract]"}}},schema),e(function(){schema.setup.autoLoad&&schema.load&&schema.load()})}(jQuery),function(e){"use strict";schema.create=function(t){return this.setup=e.extend({},schema.setup,t),Object.create(schema)},schema.load=function(t){var a=e.extend({},schema.events,t);for(var r in a)if(a.hasOwnProperty(r)){var s=schema[r],n=a[r],c=n.delegation;if(n.hasOwnProperty("delegation")||(c=schema.delegate(n),n.delegation=c),c>1){var i=n.type+n.namespace;e(document).on(i,s),c>2&&e(document).trigger(i)}}},schema.delegate=function(e){var t=schema.setup,a=t.autoBind.split(" "),r=t.autoTrigger.split(" "),s=e.type+e.namespace,n=s.replace(/^\./,"").split("."),c=a.some(function(e){var t=e.replace(/^\./,"").split(".");return t.every(function(e){return-1!==n.indexOf(e)})})?2:0;return c+=r.some(function(e){var t=e.replace(/^\./,"").split(".");return t.every(function(e){return-1!==n.indexOf(e)})})?1:0},schema.retrieve=function(t,a){var r=schema.events.retrieve.selector,s=e(r).add(a&&a.selector);s.each(function(){var t=e(this),a=schema.parseData(t.data()),r=schema.parseOptions(a.options);for(var s in r)r.hasOwnProperty(s)&&t.data(s,r[s])})},schema.parseData=function(e){var t={},a=schema.setup.dataPrefix,r=a&&a.length||0;for(var s in e)if(e.hasOwnProperty(s)){var n=s.slice(r),c=e[s];n=n.replace(/^[A-Z]/,function(e){return e.toLowerCase()}),t[n]=""===c?!0:c}return t},schema.parseOptions=function(e){var t={},a={},r=schema.setup.dataPrefix,s=Object.prototype.toString.call(e).slice(8,-1);if("Object"===s)a=e;else if("String"===s)try{a=JSON.parse(e)}catch(n){-1!==e.indexOf(":")&&(e=e.trim().replace(/\s*;$/,""),e.split(/\s*;\s*/).forEach(function(e){var t=e.split(/\s*:\s*/),r=t[0].toLowerCase(),s=t[1].replace(/\,/g," ").trim();-1!==s.search(/\s+/)&&(s=s.split(/\s+/)),a[r]=kalue}))}r&&r.length&&(r+="-");for(var c in a)if(a.hasOwnProperty(c)){var i=r+c;i=i.replace(/\-\w/g,function(e){return e.charAt(1).toUpperCase()}),t[i]=a[c]}return t}}(jQuery),function(e){"use strict";schema.validate=function(t,a){var r=schema.events.validate.selector,s=e(r).add(a&&a.selector);s.each(function(){var t=e(this),a=schema.parseData(t.data()),r=a.validate;t.find(":input").one("change",function(){t.data("changed",!0)}),t.on("submit",function(a){var s=e(this),n="changed"===r?s.data("changed"):!0;n?(s.find("input, textarea").each(function(){var t=e(this),a=t.val().toString().trim();""===a&&t.prop("disabled",!0).data("disabled",!0)}),"once"===r&&t.find(":submit").prop("disabled",!0),s.submit()):void 0===n&&history.back(),a.preventDefault()}),t.on("reset",function(t){var a=e(this);return a.find("input, textarea").each(function(){var t=e(this);t.data("disabled")&&t.prop("disabled",!1).data("disabled",!1)}),!0})})}}(jQuery),function(e){"use strict";schema.trim=function(t,a){var r=schema.events.trim.selector,s=e(r).add(a&&a.selector);s.contents().filter(function(){return 3===this.nodeType}).remove()},schema.extract=function(t,a){var r=schema.events.extract.selector,s=e(r).add(a&&a.selector);s.each(function(){var t=e(this),a=schema.parseData(t.data()),r=a.extract.split(/\s*\,\s*/);if(-1!==r.indexOf("url")){var s=/\b(https?|ftp)\:\/\/[^\s\"]+(\/|\b)/g;t.html(t.html().replace(s,function(e){return schema.format('<a href="${href}">${href}</a>',{href:e})}))}if(-1!==r.indexOf("emoji")&&a.emoji){var n=/(^|[^\w\"\'\`])(\:([\w\-]+)\:)/g;t.html(t.html().replace(n,function(e,r,s,n){return schema.format('${sep}<img src="${src}" height=${height} alt="${alt}" title="${title}" />',{sep:r,src:a.emoji.replace(/\/*$/,"/")+n.replace(/\_/g,"-")+".svg",height:Math.round(1.2*+t.css("font-size").slice(0,-2)),alt:s,title:n})}))}})},schema.format=function(e,t){var a=String(e),r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&a.match(/\$\{[^\{\}]+\}/g).forEach(function(e,r){var s=e.replace(/^\$\{\s*(.+)\s*\}$/,"$1");t.hasOwnProperty(s)&&(a=a.replace(e,function(){return t[s]}))}),a},schema.parseURL=function(e){var t=document.createElement("a");return t.href=e.replace(/([^:])\/{2,}/g,"$1/").replace(/\+/g," "),{href:t.href,origin:t.origin,protocol:t.protocol,username:t.username,password:t.password,host:t.host,hostname:t.hostname,port:t.port,path:t.pathname+t.search,pathname:t.pathname,segments:t.pathname.replace(/^\/+/,"").split("/"),search:t.search,query:function(){var e={},a=t.search.replace(/(^\?&?)|(&$)/g,"");return-1===a.indexOf("=")?a:(a.split(/&+/).forEach(function(t){var a=decodeURIComponent(t).split("="),r=a[0],s=a[1];e.hasOwnProperty(r)&&(s=[].concat(e[r],s)),e[r]=s}),e)}(),hash:t.hash,fragment:t.hash.replace(/^#/,"")}}}(jQuery),function(e){"use strict";schema.sprite=function(t,a){var r=schema.icons,s=schema.events.sprite.selector,n=e(s).add(a&&a.selector);n.each(function(){var t=e(this),a=schema.parseData(t.data()),s=a.icon||"unknown",n=r[s]||r.unknown;"string"==typeof n&&(n=r[n]);var c=a.width||n[0],i=a.height||n[1],o=a.path||n[2],h=a.color||n[3],p=a.colorEnabled;void 0===p&&h&&(p=!0);var u="http://www.w3.org/2000/svg",l=document.createElementNS(u,"svg");if(l.setAttribute("width",c),l.setAttribute("height",i),l.setAttribute("viewBox","0 0 "+c+" "+i),Array.isArray(o))o.forEach(function(e,t){var a=document.createElementNS(u,"path");p&&h&&a.setAttribute("fill",Array.isArray(h)?h[t]:h),a.setAttribute("d",e),l.appendChild(a)});else{var m=document.createElementNS(u,"path");p&&h&&m.setAttribute("fill",h),m.setAttribute("d",o),l.appendChild(m)}t.empty().append(l).css({width:t.hasClass("ui-fixed-width")||t.hasClass("ui-icon-circle")?t.css("height"):t.css("height").slice(0,-2)*c/i})})},schema.icons={unknown:[32,32,"M1 1h31v31h-31zM3 3v27h27v-27z"]}}(jQuery);